TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`%` TRIGGER `fuzzy_kondisi_jantung` BEFORE INSERT ON `db_jantung` FOR EACH ROW BEGIN\n    DECLARE pelan, normal, cepat, rendah, tinggi DECIMAL(5,2);\n    DECLARE z_pelan_rendah, z_pelan_normal DECIMAL(5,2);\n    DECLARE z_normal_rendah, z_normal_normal DECIMAL(5,2);\n    DECLARE z_cepat_rendah, z_cepat_normal DECIMAL(5,2);\n    DECLARE z_total, sum_weights, z_crisp DECIMAL(5,2);\n\n	-- Fuzzifikasi Detak Jantung\n	SET pelan = CASE \n	    WHEN NEW.DetakJantung <= 60 THEN 1\n	    WHEN NEW.DetakJantung > 60 AND NEW.DetakJantung < 65 THEN (65 - NEW.DetakJantung) / 5\n	    ELSE 0\n	END;\n	\n	SET normal = CASE\n	    WHEN NEW.DetakJantung > 60 AND NEW.DetakJantung <= 65 THEN (NEW.DetakJantung - 60) / 5\n	    WHEN NEW.DetakJantung > 65 AND NEW.DetakJantung <= 90 THEN 1\n	    WHEN NEW.DetakJantung > 90 AND NEW.DetakJantung < 100 THEN (100 - NEW.DetakJantung) / 10\n	    ELSE 0\n	END;\n	\n	SET cepat = CASE\n	    WHEN NEW.DetakJantung >= 90 AND NEW.DetakJantung <= 100 THEN (NEW.DetakJantung - 90) / 10\n	    WHEN NEW.DetakJantung > 100 THEN 1\n	    ELSE 0\n	END;\n	\n	-- Fuzzifikasi Saturasi Oksigen\n	SET rendah = CASE\n	    WHEN NEW.SaturasiOksigen <= 85 THEN 1\n	    WHEN NEW.SaturasiOksigen > 90 AND NEW.SaturasiOksigen < 95 THEN (95 - NEW.SaturasiOksigen) / 5\n	    ELSE 0\n	END;\n	\n	SET tinggi = CASE\n	    WHEN NEW.SaturasiOksigen >= 85 THEN 1\n	    WHEN NEW.SaturasiOksigen > 90 AND NEW.SaturasiOksigen < 95 THEN (NEW.SaturasiOksigen - 90) / 5\n	    ELSE 0\n	END;\n\n    -- Implementasi Aturan Tsukamoto dan perhitungan z (nilai keluaran)\n    SET z_pelan_rendah = LEAST(pelan, rendah) * 30; -- \'Tidak Sehat\'\n    SET z_pelan_normal = LEAST(pelan, tinggi) * 30; -- \'Tidak Sehat\'\n    SET z_normal_rendah = LEAST(normal, rendah) * 50; -- \'Kurang Sehat\'\n    SET z_normal_normal = LEAST(normal, tinggi) * 70; -- \'Sehat\'\n    SET z_cepat_rendah = LEAST(cepat, rendah) * 70; -- \'Sehat\'\n    SET z_cepat_normal = LEAST(cepat, tinggi) * 70; -- \'Sehat\'\n\n    -- Hitung total z dan sum_weights\n    SET z_total = z_pelan_rendah + z_pelan_normal +\n                  z_normal_rendah + z_normal_normal +\n                  z_cepat_rendah + z_cepat_normal;\n\n    SET sum_weights = (LEAST(pelan, rendah) + LEAST(pelan, tinggi) +\n                       LEAST(normal, rendah) + LEAST(normal, tinggi) +\n                       LEAST(cepat, rendah) + LEAST(cepat, tinggi));\n\n    -- Defuzzifikasi menggunakan rata-rata berbobot\n    IF sum_weights > 0 THEN\n        SET z_crisp = z_total / sum_weights;\n    ELSE\n        SET z_crisp = 0; -- Default jika tidak ada keanggotaan\n    END IF;\n    \n    -- Simpan hasil defuzzifikasi\n    SET NEW.z_crips = z_crisp;\n\n    -- Kategorisasi hasil defuzzifikasi\n    IF z_crisp < 40 THEN\n        SET NEW.KondisiJantung = \'TIDAK SEHAT\';\n    ELSEIF z_crisp BETWEEN 40 AND 60 THEN\n        SET NEW.KondisiJantung = \'KURANG SEHAT\';\n    ELSE\n        SET NEW.KondisiJantung = \'SEHAT\';\n    END IF;\nEND'
sql_modes=1411383296
definers='root@%'
client_cs_names='utf8mb4'
connection_cl_names='utf8mb4_unicode_ci'
db_cl_names='utf8mb4_uca1400_ai_ci'
created=1731222575352105
